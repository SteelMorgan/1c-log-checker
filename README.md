# 1C Log Parser Service

–°–µ—Ä–≤–∏—Å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –∂—É—Ä–Ω–∞–ª–æ–≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞ 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –≤ ClickHouse –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ Grafana –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö AI-–∞–≥–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ MCP.

**–í–µ—Ä—Å–∏—è:** 1.0.0 (–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)  
**–ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è:** Kiro

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [TODO](#todo)

---

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- **–ü–∞—Ä—Å–∏–Ω–≥ –ª–æ–≥–æ–≤ 1–°** (–∂—É—Ä–Ω–∞–ª —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ .lgf/.lgp –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∂—É—Ä–Ω–∞–ª)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ ClickHouse** —Å –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ TTL
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤ Grafana** (–¥–∞—à–±–æ—Ä–¥—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –æ—à–∏–±–æ–∫, –Ω–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º)
- **MCP-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤ (–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π/–ø–æ–ª–Ω—ã–π JSON)

### –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

**–õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ñ–∞–π–ª–æ–≤ –∂—É—Ä–Ω–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (.lgp) –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∞ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ [OneSTools.EventLog](https://github.com/akpaevj/OneSTools.EventLog)** (–∞–≤—Ç–æ—Ä: [akpaevj](https://github.com/akpaevj)).

–í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã:
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–π –∑–∞–ø–∏—Å–∏ –∂—É—Ä–Ω–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –ê–ª–≥–æ—Ä–∏—Ç–º –ø–∞—Ä—Å–∏–Ω–≥–∞ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –±–∞–ª–∞–Ω—Å–∞ —Å–∫–æ–±–æ–∫
- –ú–∞–ø–ø–∏–Ω–≥ –∑–Ω–∞—á–µ–Ω–∏–π (—É—Ä–æ–≤–Ω–∏ —Å–æ–±—ã—Ç–∏–π, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π)
- –ü–∞—Ä—Å–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ hex-—Ñ–æ—Ä–º–∞—Ç–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö

–°–º. –ø–æ–¥—Ä–æ–±–Ω–µ–µ: [docs/changelog/lgp-parser-enhancement.md](docs/changelog/lgp-parser-enhancement.md)

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ñ—É—Ä–Ω–∞–ª —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ß—Ç–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ `.lgf`, `.lgp`, `.lgx`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∏ —Ñ–∞–π–ª–æ–≤—ã—Ö –±–∞–∑
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ GUID –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏ –±–∞–∑—ã

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –∂—É—Ä–Ω–∞–ª
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π/plain)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ JSON —Ñ–æ—Ä–º–∞—Ç–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ **–≤—Å–µ—Ö** —Å–≤–æ–π—Å—Ç–≤ —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–æ—Ç–∞—Ü–∏–∏ –∏ —Å–∂–∞—Ç–∏—è (zip)

### ClickHouse
- ‚úÖ –¢–∞–±–ª–∏—Ü—ã: `event_log`, `tech_log`
- ‚úÖ –ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –¥–Ω—è–º
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π TTL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 –¥–Ω–µ–π)
- ‚úÖ `mv_new_errors` - —Å–≤–æ–¥–∫–∞ –ø–æ –≤—Å–µ–º –æ—à–∏–±–∫–∞–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 48 —á–∞—Å–æ–≤

### Grafana
- ‚úÖ Dashboard: –û–±—â–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ Dashboard: –¢–æ–ø –æ—à–∏–±–æ–∫
- ‚úÖ Dashboard: –ù–æ–≤—ã–µ –æ—à–∏–±–∫–∏ (24 —á–∞—Å–∞)
- ‚úÖ Dashboard: –¢–µ—Ö–∂—É—Ä–Ω–∞–ª (duration, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, DBMSSQL)

### MCP –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤

**–ß—Ç–µ–Ω–∏–µ –ª–æ–≥–æ–≤:**
- ‚úÖ `get_event_log`: –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –∂—É—Ä–Ω–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ `get_tech_log`: –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞
- ‚úÖ `get_new_errors`: –Ω–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Ö–∂—É—Ä–Ω–∞–ª–∞:**
- ‚úÖ `configure_techlog`: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è logcfg.xml
- ‚úÖ `disable_techlog`: –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ—Ö–∂—É—Ä–Ω–∞–ª–∞
- ‚úÖ `get_techlog_config`: —á—Ç–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–†–µ–∂–∏–º—ã –≤—ã–≤–æ–¥–∞:**
- ‚úÖ `minimal` (–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π, —ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤)
- ‚úÖ `full` (–≤—Å–µ –ø–æ–ª—è –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Windows Host (1C Logs)
    ‚Üì (volume mount, read-only)
Docker Compose Stack
    ‚îú‚îÄ‚îÄ log-parser (Go)
    ‚îÇ   ‚îú‚îÄ‚îÄ Event Log Reader
    ‚îÇ   ‚îú‚îÄ‚îÄ Tech Log Tailer
    ‚îÇ   ‚îú‚îÄ‚îÄ Batch Writer
    ‚îÇ   ‚îî‚îÄ‚îÄ Offset Storage (BoltDB)
    ‚îÇ
    ‚îú‚îÄ‚îÄ ClickHouse
    ‚îÇ   ‚îú‚îÄ‚îÄ event_log table
    ‚îÇ   ‚îú‚îÄ‚îÄ tech_log table
    ‚îÇ   ‚îî‚îÄ‚îÄ mv_new_errors view
    ‚îÇ
    ‚îú‚îÄ‚îÄ MCP Server (Go)
    ‚îÇ   ‚îú‚îÄ‚îÄ get_event_log tool
    ‚îÇ   ‚îú‚îÄ‚îÄ get_tech_log tool
    ‚îÇ   ‚îî‚îÄ‚îÄ get_new_errors tool
    ‚îÇ
    ‚îî‚îÄ‚îÄ Grafana
        ‚îî‚îÄ‚îÄ Auto-provisioned Dashboards

AI Agent (Claude, etc.) ‚Üê MCP protocol
```

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–Ø–∑—ã–∫:** Go 1.21+
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** ClickHouse 23.8+
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:** Grafana 11.0+
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:** Docker + Docker Compose
- **Offset Storage:** BoltDB
- **Observability:** OpenTelemetry (—Ç—Ä–µ–π—Å–∏–Ω–≥), zerolog (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Docker Desktop** 20+
- **Docker Compose** 3.8+
- **Windows** (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–≥–∞–º 1–°)
- **1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ** 8.3+ (–∏—Å—Ç–æ—á–Ω–∏–∫ –ª–æ–≥–æ–≤)

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```powershell
git clone <repository-url>
cd 1c-log-checker
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```powershell
cd deploy/docker
Copy-Item .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `deploy/docker/.env` –∏ —É–∫–∞–∂–∏—Ç–µ –ø—É—Ç–∏:

```ini
LOG_DIRS=C:\Program Files\1cv8\srvinfo
TECHLOG_CONFIG_DIR=D:\My Projects\FrameWork 1C\1c-log-checker\configs\techlog\
TECHLOG_DIRS=D:\My Projects\FrameWork 1C\1c-log-checker\tech_logs
```

–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞ (—Å–µ—Ä–≤–∏—Å –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π)

–ü–æ-—É–º–æ–ª—á–∞–Ω–∏—é —è –ø—Ä–µ–¥–ª–∞–≥–∞—é –µ–≥–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –ø—Ä–æ–µ–∫—Ç–∞. –§–∞–π–ª –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤ `configs/techlog/logcfg.xml`.

–°–æ–≥–ª–∞—Å–Ω–æ –ò–¢–° (https://its.1c.ru/db/v8311doc#bookmark:adm:TI000000376) –≤ —Ñ–∞–π–ª conf.cfg –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É, —É–∫–∞–∑—ã–≤–∞—é—â—É—é –≥–¥–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –∏—Å–∫–∞—Ç—å —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥–∞, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –≤ "—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º –∫–∞—Ç–∞–ª–æ–≥–µ".
conf.cfg —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö - –ø–µ—Ä–≤–∏—á–Ω–æ —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏. –í –Ω–µ–º —É–∫–∞–∑–∞–Ω–∞ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è –≤ –∫–∞—Ç–∞–ª–æ–≥ C:\Program Files\1cv8\conf\, —á—Ç–æ –±—ã –¥–ª—è –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –æ–¥–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. 
–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥ –µ—â–µ —Ä–∞–∑ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ C:\Program Files\1cv8\conf\ –ù–ï —É–¥–∞—ë—Ç—Å—è (–Ω–∞ 8.3.27 –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ), –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, –∫–æ—Ç–æ—Ä—É—é –∏—Å–ø–æ–ª—å–∑—É–µ–º (–ü—Ä–∏–º–µ—Ä: C:\Program Files\1cv8\8.3.27.1719\bin\conf)

```ini
# –£–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ—Ç –∂–µ –ø—É—Ç—å, —á—Ç–æ —É–∫–∞–∑–∞–ª–∏ –≤ —Ñ–∞–π–ª–µ deploy/docker/.env –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ TECHLOG_CONFIG_DIR
ConfLocation=D:\ProjectCatalog\configs\techlog\
```


### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GUID-–º–∞–ø–ø–∏–Ω–≥–∞

**‚ö†Ô∏è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:** –î–ª—è —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `configs` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç) –∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å —Ç–∞–º —Ñ–∞–π–ª `cluster_map.yaml`. –û–±—Ä–∞–∑–µ—Ü —Ñ–∞–π–ª–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `configs/cluster_map.yaml.example`. –ü–æ–¥—Å–∫–∞–∑–∫–∞ –∞–≥–µ–Ω—Ç—É –∫—É–¥–∞ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.

–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã –∞–≥–µ–Ω—Ç –∑–Ω–∞–ª GUID –±–∞–∑—ã/–∫–ª–∞—Å—Ç–µ—Ä–∞, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø—Ä–æ–µ–∫—Ç–µ, –∏ –º–æ–≥ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∑–∞ –ª–æ–≥–∞–º–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –±–∞–∑—ã.

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É `configs` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å–ª–∏ –µ—ë –Ω–µ—Ç)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–∑–µ—Ü: `configs/cluster_map.yaml.example` ‚Üí `configs/cluster_map.yaml`
3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `configs/cluster_map.yaml` –∏ —É–∫–∞–∂–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ GUID –≤–∞—à–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏ –±–∞–∑

```yaml
clusters:
  "your-cluster-guid":
    name: "Production Cluster"
    
infobases:
  "your-infobase-guid":
    name: "ERP Production"
    cluster_guid: "your-cluster-guid"
```

–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å GUID—ã ‚Äî —Å–º. [docs/guides/get-guids.md](docs/guides/get-guids.md) –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —É–¥–æ–±–Ω—ã–π –¥–ª—è –≤–∞—Å —Å–ø–æ—Å–æ–± (–≤ –≥—É–≥–ª–µ –º–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)

### 4. –ó–∞–ø—É—Å–∫

```powershell
cd deploy/docker
docker-compose up -d
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞

- **ClickHouse:** http://localhost:8123/play
- **Grafana:** http://localhost:3000 (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ - –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –ø–æ–ø—Ä–æ—Å–∏—Ç–µ –∞–≥–µ–Ω—Ç–∞)
- **MCP Server:** http://localhost:8080

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|--------------|
| `LOG_DIRS` | –ü—É—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥–∞–º –∂—É—Ä–Ω–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—á–µ—Ä–µ–∑ `;`) | - |
| `TECHLOG_DIRS` | –ü—É—Ç–∏ –∫ –∫–∞—Ç–∞–ª–æ–≥–∞–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞ (—á–µ—Ä–µ–∑ `;`) | - |
| `CLICKHOUSE_HOST` | –•–æ—Å—Ç ClickHouse | `localhost` |
| `CLICKHOUSE_PORT` | –ü–æ—Ä—Ç ClickHouse | `9000` |
| `CLICKHOUSE_DB` | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ClickHouse | `logs` |
| `LOG_RETENTION_DAYS` | –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ (–¥–Ω–∏) | `30` |
| `READ_ONLY` | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ, –±–µ–∑ –∑–∞–ø–∏—Å–∏ –≤ CH) | `false` |
| `MCP_PORT` | –ü–æ—Ä—Ç MCP-—Å–µ—Ä–≤–µ—Ä–∞ | `8080` |
| `MAX_WORKERS` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ | 4
| `LOG_LEVEL` | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: `debug` = –¥–µ–±–∞–≥-—Ñ–∞–π–ª (`/logs/parser_all_records.jsonl`), `info`/`warn`/`error` = –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ –≤ —Ñ–∞–π–ª (`/logs/parser.log`, `/logs/mcp.log`) | `error` |
| `NEW_ERRORS_UPDATE_INTERVAL` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã mv_new_errors (–º–∏–Ω—É—Ç—ã) | `10` |
| `NEW_ERRORS_HOURS` | –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ—à–∏–±–æ–∫ (—á–∞—Å—ã) | `48` |

–í –ø—Ä–∏–Ω—Ü–∏–ø–µ –∫–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∫–∞–∑–∞–Ω—ã –≤ —Ä–∞–∑–¥–µ–ª–µ "–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä–¢".

### –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- **`deploy/docker/.env`** ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ `deploy/docker/.env.example`)
- **`configs/cluster_map.yaml`** ‚Äî –º–∞–ø–ø–∏–Ω–≥ GUID ‚Üí –∏–º–µ–Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤/–±–∞–∑ (—Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ –ø–∞–ø–∫–µ `configs` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –æ–±—Ä–∞–∑–µ—Ü –≤ `configs/cluster_map.yaml.example`)
- **`deploy/docker/docker-compose.yml`** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker Compose

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä—Å–µ—Ä–∞

–ß–µ–ª–æ–≤–µ–∫–∞–º–∏ - —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ö–ª–∏–∫—Ö–∞—É—Å–∞ –∏–ª–∏ –ì—Ä–∞—Ñ–∞–Ω—É (—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ—Ä—Ç—ã –≤ –¥–æ–∫–µ—Ä–µ –∏–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)
–ê–≥–µ–Ω—Ç–∞–º LLM - —á–µ—Ä–µ–∑ MCP. 
–î–ª—è –∞–≥–µ–Ω—Ç–∞ "–≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ" –∏–¥–µ—Ç –Ω–∞–≤—ã–∫ https://github.com/SteelMorgan/cursor-anthropic-skills/tree/main/custom-skills/TECHLOG_SKILL.md
  - –æ–±—ä—è—Å–Ω—è–µ—Ç –∞–≥–µ–Ω—Ç—É workflow –¥–ª—è –¢–ñ
  - –∫–ª—é—á–µ–≤—ã–µ –∑–Ω–∞–Ω–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å –¢–ñ

–ù–∞–≤—ã–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ https://github.com/SteelMorgan/cursor-anthropic-skills/ (–ø—Ä–æ–µ–∫—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞–≤—ã–∫–∞ –∞–≥–µ–Ω—Ç–æ–º —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ), –∞ –º–æ–∂–Ω–æ –∑–∞–±—Ä–∞—Ç—å –∫ —Å–µ–±–µ –∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö. –ù–∞–≤—ã–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –∞–Ω—Ç—Ä–æ–ø–∏–∫–∞, –ø–æ—ç—Ç–æ–º—É –¥–ª—è Claude —Ç–æ–∂–µ –ø–æ–¥–æ–π–¥—É—Ç.


### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MCP tools

–°–º. [docs/mcp/usage.md](docs/mcp/usage.md)

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](docs/specs/log-service.spec.md)** ‚Äî –ø–æ–ª–Ω–∞—è —Å–ø–µ–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (Requirements/Design/Tasks)
- **[–ò—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å](docs/specs/user-request.md)** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- **[–ü–æ–ª—É—á–µ–Ω–∏–µ GUID–æ–≤](docs/guides/get-guids.md)** ‚Äî –∫–∞–∫ —É–∑–Ω–∞—Ç—å GUID –∫–ª–∞—Å—Ç–µ—Ä–∞/–±–∞–∑—ã
- **[–ù–∞—Å—Ç—Ä–æ–π–∫–∞ logcfg.xml](docs/techlog/logcfg.md)** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –∂—É—Ä–Ω–∞–ª–∞
- **[–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MCP tools](docs/mcp/usage.md)** ‚Äî –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤, —Ä–µ–∂–∏–º—ã, best practices

---

## TODO

### –ù–∞–≤—ã–∫–∏ –∏ –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π:
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –ª–æ–≥–∞–º–∏ PostgreSQL
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –ª–æ–≥–∞–º–∏ MS SQL
- [ ] –°–æ–∑–¥–∞—Ç—å –Ω–∞–≤—ã–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å "MS SQL/PostgreSQL –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ 1–°" (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, RCSI, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

–°–º. –ø–æ–¥—Ä–æ–±–Ω–µ–µ:
- [TODO: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π SQL](docs/guides/TODO_sql_knowledge_base.md)

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –õ–∏—Ü–µ–Ω–∑–∏—è –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–∞ –ø–æ–∑–∂–µ.

---

**–í–µ—Ä—Å–∏—è:** 0.8.0  
**–°—Ç–∞—Ç—É—Å:** –ê–ª—å—Ñ–∞-–≤–µ—Ä—Å–∏—è (—ç—Ç–∞–ø spec/design)  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-13

