# –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞:** 2025-11-13  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –≤—Å–µ—Ö `1Cv8.lgf` —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ GUID –∫–ª–∞—Å—Ç–µ—Ä–∞ –∏–∑ `1CV8Clst.lst`
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ GUID –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π –±–∞–∑—ã –∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–æ–≤
- ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ 2 —Ä–µ–∞–ª—å–Ω—ã—Ö –±–∞–∑ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ GUID

### 2. –ß—Ç–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### –ú–µ—Ç–æ–¥ 1: ibcmd (–æ—Å–Ω–æ–≤–Ω–æ–π, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `IbcmdReader` –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ 1–°
- ‚úÖ –ê–≤—Ç–æ–ø–æ–∏—Å–∫ ibcmd –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—É—Ç—è—Ö
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—É—Ç–∏ –∫ –ø–∞–ø–∫–µ –≤–µ—Ä—Å–∏–∏ (–∞–≤—Ç–æ–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `\bin\ibcmd.exe`)
- ‚úÖ –ó–∞–ø—É—Å–∫ `ibcmd eventlog export` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ JSON –≤—ã–≤–æ–¥–∞ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ–∫–ø–æ–∏–Ω—Ç–∞–º–∏ (YAML —Ñ–∞–π–ª—ã)
- ‚úÖ –†–µ–∂–∏–º follow (real-time)
- ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ibcmd —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —á–∏—Ç–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è

#### –ú–µ—Ç–æ–¥ 2: –ü—Ä—è–º–æ–π –ø–∞—Ä—Å–∏–Ω–≥ .lgp (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω `LgpParser` –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ 1–°
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ `1CV8LOG(ver 2.0)`
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, —Å–≤–æ–π—Å—Ç–≤–∞)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ BOM (Byte Order Mark)
- ‚úÖ –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —Å —É—á–µ—Ç–æ–º –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `EVENT_LOG_METHOD` - –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ (ibcmd/direct)
- ‚úÖ `IBCMD_PATH` - –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ –≤–µ—Ä—Å–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ –ø—Ä—è–º–æ–π –ø–∞—Ä—Å–∏–Ω–≥ –µ—Å–ª–∏ ibcmd –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `env.example`

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `parser_service.go` —Å –≤—ã–±–æ—Ä–æ–º –º–µ—Ç–æ–¥–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞

---

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ–±—ã—Ç–∏–π
- ‚è∏Ô∏è –û–∂–∏–¥–∞–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù—É–∂–Ω–æ –±—É–¥–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ Go –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–≤—Ç—Ä–∞:** –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –ø–æ–¥ Go
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ä—Å–µ—Ä
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ ClickHouse (–æ—Ç–∫–ª—é—á–∏—Ç—å READ_ONLY)
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —á–µ–∫–ø–æ–∏–Ω—Ç–æ–≤

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—É—Ç–µ–π Windows
```
C:\Program Files\1cv8\srvinfo\
  ‚îî‚îÄ‚îÄ reg_<port>\
      ‚îú‚îÄ‚îÄ 1CV8Clst.lst (GUID –∫–ª–∞—Å—Ç–µ—Ä–∞)
      ‚îî‚îÄ‚îÄ <infobase_guid>\
          ‚îî‚îÄ‚îÄ 1Cv8Log\
              ‚îú‚îÄ‚îÄ 1Cv8.lgf
              ‚îî‚îÄ‚îÄ YYYYMMDDHHMMSS.lgp
```

### –§–æ—Ä–º–∞—Ç .lgp —Ñ–∞–π–ª–∞
```
1CV8LOG(ver 2.0)
<infobase_guid>

{timestamp,level,{transaction},session,user,computer,event,record,app,"comment",data_sep,{metadata},"metadata_pres",...,{props}}
```

### –ö–æ–º–∞–Ω–¥–∞ ibcmd
```bash
ibcmd eventlog export \
  --format json \
  --follow 1000 \
  --skip-root \
  [--from <checkpoint>] \
  <event_log_dir>
```

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- BOM –≤ .lgp —Ñ–∞–π–ª–∞—Ö - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- BoltDB –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ - –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `docs/analysis/ibcmd-vs-direct-parsing.md` - —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤
- `docs/specs/log-service.spec.md` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- `i8106019/eventlog-watcher.tar/` - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç 1–°


